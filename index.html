<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Meu love: Karen üíñ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Lato:wght@400;700&family=Special+Elite&display=swap" rel="stylesheet">
    <style>
        :root{--primary:#ff4d88;--bg:#121212;--card-bg:#1e1e1e;--text:#ffffff;--text-muted:#a0a0a0;--shadow:0 4px 15px rgba(0,0,0,0.4);--radius:20px}*{box-sizing:border-box;margin:0;padding:0}html,body{height:100%;font-family:'Lato',sans-serif;background:var(--bg);color:var(--text)}body{display:flex;flex-direction:column;justify-content:center;align-items:center;overflow-x:hidden;padding:15px}h1{font-family:'Montserrat',sans-serif;color:var(--primary);margin-bottom:25px;text-align:center;font-size:1.8rem;line-height:1.3}h2{font-family:'Montserrat',sans-serif;color:var(--primary);margin-bottom:20px;text-align:center;font-size:1.5rem}.card{background:var(--card-bg);padding:30px;border-radius:var(--radius);box-shadow:var(--shadow);width:100%;max-width:400px;text-align:center;border:1px solid rgba(255,255,255,0.1)}.hidden{display:none}input[type=date],input[type=text]{padding:12px;border-radius:var(--radius);border:1px solid #444;background-color:#333;color:var(--text);font-size:1rem;margin-top:10px;width:100%;text-align:center}button{margin:10px 5px 0;padding:15px 25px;font-size:1rem;font-weight:700;border:none;border-radius:var(--radius);background:var(--primary);color:#fff;cursor:pointer;transition:transform .2s ease,background .3s ease;display:inline-block;box-shadow:0 4px 10px rgba(255,77,136,.3)}button:hover{background:#e6005c;transform:scale(1.05)}#app{width:100%;height:100%}section{display:none;width:100%;min-height:100%;padding:20px;text-align:center;animation:fadeIn .5s ease-in-out;position:relative}section.active{display:flex;flex-direction:column;justify-content:center;align-items:center}@keyframes fadeIn{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.botoes-nav{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;width:100%;margin-top:25px}#contador{display:flex;flex-wrap:wrap;justify-content:center;gap:15px;margin-top:20px}.contador-bloco{background:var(--card-bg);padding:15px;border-radius:var(--radius);min-width:90px;text-align:center;border-top:3px solid var(--primary)}.contador-bloco span{display:block}.contador-numero{font-size:2.5rem;font-weight:700;color:var(--primary);font-family:'Montserrat',sans-serif}.contador-label{font-size:.9rem;color:var(--text-muted);margin-top:5px}.carousel-wrapper{width:100%;max-width:95vw;margin-top:20px}.carousel-container{display:flex;overflow-x:auto;scroll-behavior:smooth;gap:15px;padding:20px 10px;scroll-snap-type:x mandatory;scrollbar-width:none;-ms-overflow-style:none}.carousel-container::-webkit-scrollbar{display:none}.carousel-item{width:80%;flex-shrink:0;scroll-snap-align:center;text-align:center}.carousel-item img{width:100%;border-radius:0;box-shadow:var(--shadow);margin-bottom:10px}.carousel-item p{font-size:.9rem;color:var(--text-muted);font-style:italic;padding:0 5px}.multi-page-card{background-color:var(--card-bg);border:1px solid var(--primary);border-radius:var(--radius);padding:25px;width:100%;max-width:500px;text-align:left}.multi-page-card h2{text-align:center;color:var(--primary);font-family:'Montserrat',sans-serif;margin-bottom:20px}.multi-page-card .page{display:none}.multi-page-card .page.active-page{display:block;animation:fadeIn .4s ease-in-out}.multi-page-card .page p{text-align:left;line-height:1.6;margin-bottom:1em;color:var(--text-muted)}.multi-page-card .page img,.multi-page-card .page iframe{width:100%;height:auto;border-radius:var(--radius);margin-top:15px;box-shadow:var(--shadow)}.page-navigation{display:flex;justify-content:space-between;margin-top:20px;align-items:center;border-top:1px solid #333;padding-top:15px}.page-navigation button{padding:8px 18px;font-size:.9rem;margin:0}.page-navigation span{font-size:1rem;color:var(--text-muted)}.quiz-opcoes button{display:block;width:100%;max-width:300px;margin:10px auto}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:none;justify-content:center;align-items:center;z-index:1000}.modal-content{background:var(--card-bg);padding:30px;border-radius:var(--radius);text-align:center}.modal-content h2{font-size:2rem;margin-bottom:15px}.mensagem-secreta{font-family:'Special Elite',monospace;font-size:1.5rem;color:var(--text-muted);background:#000;padding:20px;border-radius:10px;line-height:1.7;-webkit-user-select:none;user-select:none}#resposta-secreta{color:var(--primary);font-weight:700}.poema-container{font-family:'Special Elite',cursive;font-size:1.3rem;line-height:2;width:100%;max-width:400px;text-align:center}.palavra-escolha{color:var(--primary);font-weight:700;text-decoration:underline;cursor:pointer}.palavra-revelada{color:var(--primary);font-weight:700;animation:fadeIn .5s}.capsula-grid{display:grid;grid-template-columns:1fr;gap:20px;width:100%;max-width:500px}.capsula-card{background:var(--card-bg);padding:20px;border-radius:var(--radius);border-left:5px solid var(--primary)}.capsula-card h2{font-size:1.2rem;margin-bottom:10px;text-align:left}.capsula-card p{text-align:left;color:var(--text-muted)}.vale-container{display:grid;grid-template-columns:1fr;gap:20px;width:100%;max-width:400px}.vale-card{background:var(--card-bg);border:2px dashed var(--primary);padding:20px;border-radius:15px;cursor:pointer;transition:opacity .3s ease,transform .3s ease;position:relative}.vale-card:hover{transform:scale(1.03)}.vale-card h3{font-family:'Special Elite',cursive;font-size:1.5rem;margin-bottom:10px}.vale-card p{font-size:1rem;color:var(--text-muted)}.vale-card.resgatado{opacity:.5;cursor:not-allowed;border-style:solid}.vale-card.resgatado::after{content:'RESGATADO ‚úîÔ∏è';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) rotate(-15deg);font-size:2rem;color:#fff;background:rgba(0,0,0,.5);padding:5px 10px;border-radius:10px}.carta-container{width:100%;max-width:500px;position:relative;min-height:400px;display:flex;justify-content:center;align-items:center}#foto-carta-capa{cursor:pointer;transition:transform .8s ease,opacity .5s ease .3s;width:100%;max-width:350px;box-shadow:var(--shadow);position:absolute;z-index:10}#foto-carta-capa:hover{transform:scale(1.05)}#foto-carta-capa.aberta{transform:translateY(-150%) scale(.5);opacity:0}#conteudo-carta{opacity:0;transition:opacity 1s ease .5s;width:100%}#conteudo-carta.revelado{opacity:1}.foto-da-carta{width:100%;max-width:350px;border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:20px}.carta-texto{font-size:1.1rem;color:var(--text-muted);text-align:left;line-height:1.7;background-color:var(--card-bg);border-radius:var(--radius);padding:25px;box-shadow:var(--shadow)}.carta-texto p{margin-bottom:1em}.coracao-pulsante{font-size:6rem;animation:pulso-lento 1.5s infinite ease-in-out}@keyframes pulso-lento{0%,to{transform:scale(1);color:var(--primary)}50%{transform:scale(1.15);color:#ff85b3}}

        /* --- ESTILOS NOVAS FUNCIONALIDADES --- */
        #saudacao-dinamica { font-size: 1.1rem; color: var(--text-muted); margin-top: 15px; line-height: 1.5; font-style: italic; }
        .horoscopo-card { background: var(--card-bg); padding: 30px; border-radius: var(--radius); border-top: 3px solid var(--primary); width: 100%; max-width: 450px; }
        #texto-horoscopo { margin-top: 20px; font-size: 1.2rem; line-height: 1.7; font-family: 'Special Elite', cursive; }
        .receita-form p { margin: 15px 0; line-height: 1.8; font-size: 1.1rem; }
        .receita-form input[type=text] { margin: 0 5px; width: 150px; display: inline-block; }
        #resultado-receita { background: #111; border-left: 5px solid var(--primary); padding: 20px; margin-top: 25px; border-radius: 10px; font-family: 'Special Elite', cursive; font-size: 1.3rem; line-height: 1.8; }
        #canvas-constelacao { background-color: #000; background-image: radial-gradient(white 0.5px, transparent 0), radial-gradient(white 0.5px, transparent 0); background-size: 30px 30px; background-position: 0 0, 15px 15px; border-radius: var(--radius); cursor: crosshair; }
        #constelacao-resultado { color: var(--primary); font-size: 1.5rem; margin-top: 20px; font-family: 'Montserrat', sans-serif; }
        #constelacao-resultado img { max-width: 200px; border-radius: 50%; border: 4px solid var(--primary); margin-top: 15px; }
    </style>
</head>
<body>

<div id="login" class="card">
    <h1>Qual o in√≠cio da nossa hist√≥ria?</h1>
    <input type="date" id="dataInput">
    <button onclick="verificarData()">Entrar üíñ</button>
</div>

<div id="app" class="hidden">

    <section class="active">
        <img src="euela.jpg" alt="Nossa Foto" style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%; border: 4px solid var(--primary); margin-bottom: 25px; box-shadow: var(--shadow);">
        <h2 id="saudacao-dinamica">Carregando uma sauda√ß√£o especial...</h2>
        <h1>Estamos Juntos H√°</h1>
        <div id="contador">
            <div class="contador-bloco"><span id="contador-anos" class="contador-numero">0</span><span class="contador-label">Anos</span></div>
            <div class="contador-bloco"><span id="contador-dias" class="contador-numero">0</span><span class="contador-label">Dias</span></div>
            <div class="contador-bloco"><span id="contador-horas" class="contador-numero">0</span><span class="contador-label">Horas</span></div>
            <div class="contador-bloco"><span id="contador-minutos" class="contador-numero">0</span><span class="contador-label">Minutos</span></div>
            <div class="contador-bloco"><span id="contador-segundos" class="contador-numero">0</span><span class="contador-label">Segundos</span></div>
        </div>
        <div class="botoes-nav"><button onclick="proxima()">Come√ßar</button></div>
    </section>

    <section>
        <h1>Um Pouco de N√≥s</h1>
        <div class="carousel-wrapper">
            <div class="carousel-container">
                <div class="carousel-item"><img src="bahia.jpg" alt="Mem√≥ria 1"><p>Seu sorriso √© meu sol.</p></div>
                <div class="carousel-item"><img src="bubs.jpg" alt="Mem√≥ria 2"><p>Tudo √© melhor com voc√™.</p></div>
                <div class="carousel-item"><img src="nos.jpg" alt="Mem√≥ria 3"><p>Voc√™ √© nosso lar.</p></div>
                <div class="carousel-item"><img src="pedra.jpg" alt="Mem√≥ria 3"><p>Meu cora√ß√£o sorri quando te v√™.</p></div>
            </div>
        </div>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button><button onclick="proxima()">Continuar</button></div>
    </section>

    <section>
        <h1>O que mais amo em voc√™:</h1>
        <div class="multi-page-card">
            <div class="page">
                <h2>Voc√™ alegre porque vai comer kkkkk </h2>
                <video autoplay loop muted playsinline style="width:100%; border-radius:20px;">
                    <source src="alegria.mp4" type="video/mp4">
                    Desculpe, seu navegador n√£o suporta v√≠deos embutidos.
                </video>
            </div>

            <div class="page">
                <h2>Seu Olhar</h2>
                <img src="olharprin.jpg" alt="Olhar">
            </div>
            <div class="page">
                <h2>Seu Sorriso </h2>
                <video autoplay loop muted playsinline style="width:100%; border-radius:20px;">
                    <source src="sorriso.mp4" type="video/mp4">
                    Desculpe, seu navegador n√£o suporta v√≠deos embutidos.
                </video>
            </div>

            <div class="page">
                <h2>Voc√™ me fazendo de DIVAAAA</h2>
                <video autoplay loop muted playsinline style="width:100%; border-radius:20px;">
                    <source src="diva.mp4" type="video/mp4">
                    Desculpe, seu navegador n√£o suporta v√≠deos embutidos.
                </video>
            </div>
            <div class="page">
                <h2>E muito mais que se fosse colocar aqui n√£o iria caber kkkk </h2>
                <img src="ralph.jpg" alt="Ralph">
            </div>
            <div class="page-navigation">
                <button onclick="previousPage()">Anterior</button>
                <span id="page-indicator">1 / 5</span>
                <button onclick="nextPage()">Pr√≥xima</button>
            </div>
        </div>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button><button onclick="proxima()">Tenho um desafio gatinha...</button></div>
    </section>

    <section>
        <h1>Acertou ganha beijinho</h1>
        <h2>Qual foi o primeiro presente que te dei?</h2>
        <img src="gatinho.jpg" alt="Gatinho fofo" style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%; border: 4px solid var(--primary); margin-bottom: 25px; box-shadow: var(--shadow);">
        <div class="quiz-opcoes"><button onclick="verificarQuiz(false)">Um anel</button><button onclick="verificarQuiz(true)">Uma caixa de bombom e uma meia</button><button onclick="verificarQuiz(false)">Um colar</button></div>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button></div>
    </section>

    <section>
        <h1>Acertou ganha mais um beijinho</h1>
        <h2>Onde foi nosso primeiro beijo?</h2>
        <img src="catmirela.jpg" alt="Gato da Mirela" style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%; border: 4px solid var(--primary); margin-bottom: 25px; box-shadow: var(--shadow);">
        <div class="quiz-opcoes"><button onclick="verificarQuiz(false)">Na rua</button><button onclick="verificarQuiz(true)">Na sua casa</button><button onclick="verificarQuiz(false)">Na minha casa</button></div>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button></div>
    </section>

    <section>
        <h1>Um poeminha</h1>
        <div class="poema-container">
            <p>Dizem que o universo √© feito de estrelas,</p>
            <p>Mas o meu universo inteiro mora no brilho <span id="verso1" class="palavra-revelada">...</span></p>
            <p id="escolha1"><span class="palavra-escolha" onclick="escolherPalavra('do seu olhar', 1)">do seu olhar</span> | <span class="palavra-escolha" onclick="escolherPalavra('do seu sorriso', 1)">do seu sorriso</span></p>
            <div id="verso2" class="hidden">
                <p style="margin-top:15px;">E se o destino existe,</p>
                <p>O meu foi feito para se encontrar com o <span id="verso2-palavra" class="palavra-revelada">...</span></p>
                <p id="escolha2" class="hidden"><span class="palavra-escolha" onclick="escolherPalavra('seu', 2)">seu</span> | <span class="palavra-escolha" onclick="escolherPalavra('nosso', 2)">nosso</span></p>
            </div>
        </div>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button><button onclick="proxima()">Pr√≥ximo</button></div>
    </section>

    <section>
        <h1>Decifre a Mensagem Secreta</h1>
        <div class="mensagem-secreta">
            <p>A=1 C=3 E=5 I=9 M=13 N=14 O=15 P=16 R=18 U=21 V=22</p><hr>
            <p>5 21 / 1 13 15 15 / 22 15 3 5 / 16 18 9 14 16 18 9 14</p>
        </div>
        <p id="resposta-secreta" class="hidden" style="margin-top:20px; font-size:1.5rem;">EU AMO VOCE PRIN PRIN</p>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button><button onclick="document.getElementById('resposta-secreta').classList.remove('hidden')">Revelar</button><button onclick="proxima()">Pr√≥ximo</button></div>
    </section>

    <section>
        <h1>Nossa C√°psula do Tempo</h1>
        <div class="capsula-grid">
            <div class="capsula-card"><h2>‚úàÔ∏è Pr√≥xima Viagem</h2><p>Que nossa pr√≥xima aventura seja para um lugar com praia e muita paz, s√≥ n√≥s dois.</p></div>
            <div class="capsula-card"><h2>üíç Uma Promessa</h2><p>Eu prometo continuar escolhendo voc√™, todos os dias, e construir nosso futuro juntos.</p></div>
            <div class="capsula-card"><h2>üè° Em 5 Anos</h2><p>Nos vejo em nossa casa, com o Ralphinho, celebrando cada conquista, lado a lado.</p></div>
        </div>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button><button onclick="proxima()">Um presente...</button></div>
    </section>

    <section>
        <h1>Vale-Presente</h1>
        <div class="vale-container">
            <div class="vale-card" onclick="resgatarVale(this)"><h3>Vale um Jantar</h3><p>Onde voc√™ quiser, por minha conta!</p></div>
            <div class="vale-card" onclick="resgatarVale(this)"><h3>Vale uma Noite de Filmes</h3><p>Voc√™ escolhe os filmes, eu preparo a pipoca e os doces.</p></div>
            <div class="vale-card" onclick="resgatarVale(this)"><h3>Vale uma Massagem</h3><p>Para relaxar depois de um dia cansativo.</p></div>
            <div class="vale-card" onclick="resgatarVale(this)"><h3>Beijinhos</h3><p>Beijos infinitos</p></div>
        </div>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button><button onclick="proxima()">Mais surpresas...</button></div>
    </section>

    <section>
        <h1>Hor√≥scopo do Nosso Amor</h1>
        <div class="horoscopo-card">
            <img src="nosmc.jpg" alt="Gato M√≠stico" style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%; border: 4px solid var(--primary); margin-bottom: 25px; box-shadow: var(--shadow);">
            <div id="revelador-horoscopo">
                <p style="margin-bottom: 20px; font-size: 1.1rem; color: var(--text-muted);">Os astros se alinharam para trazer uma previs√£o especial para o nosso dia. Clique para descobrir!</p>
                <button onclick="revelarHoroscopo()">Ver Previs√£o</button>
            </div>
            <div id="texto-horoscopo" class="hidden">
                <p><strong>Previs√£o de Hoje:</strong> O alinhamento de V√™nus com seu sorriso indica um per√≠odo de alta intensidade de carinhos e abra√ßos. Grandes chances de um ataque de beijos acontecer quando voc√™ menos esperar. O astral favorece massivamente o pedido da sua comida favorita.
                    <br><br><strong>N√∫mero da Sorte:</strong> A data do nosso primeiro beijo.
                    <br><strong>Cor do Dia:</strong> A cor dos seus olhos.
                </p>
            </div>
        </div>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button><button onclick="proxima()">Pr√≥ximo</button></div>
    </section>

    <section>
        <h1>A Receita do Nosso Amor</h1>
        <div id="receita-card" class="card">
            <div class="receita-form">
                <p>Pegue 2 x√≠caras de <input type="text" id="input-adjetivo" placeholder="Amor"></p>
                <p>Adicione 1 colher de <input type="text" id="input-piada" placeholder="Lealdade"></p>
                <p>Misture com <input type="text" id="input-lugar" placeholder="Carinho"></p>
                <p>E sirva com uma dose generosa de <input type="text" id="input-apelido" placeholder="Beijinhos"></p>
            </div>
            <button onclick="gerarReceita()">Criar nossa receita!</button>
            <div id="resultado-receita" class="hidden"></div>
        </div>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button><button onclick="proxima()">√öltima atividade...</button></div>
    </section>

    <section>
        <h1>Crie a Nossa Constela√ß√£o</h1>
        <p style="color: var(--text-muted); max-width: 400px; margin-bottom: 20px;">Existem 4 estrelas especiais neste c√©u. Clique e arraste para lig√°-las e revelar a nossa constela√ß√£o.</p>
        <canvas id="canvas-constelacao" width="400" height="400"></canvas>
        <div id="constelacao-resultado" class="hidden">
            <h2>Constela√ß√£o de Karen</h2>
            <img src="euela.jpg" alt="Foto do casal">
        </div>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button><button onclick="proxima()">E por √∫ltimo...</button></div>
    </section>

    <section>
        <h1>Uma Carta para Voc√™</h1>
        <div class="carta-container">
            <img src="cartinha.png" alt="Clique para abrir a carta" id="foto-carta-capa" onclick="revelarCarta()">
            <div id="conteudo-carta" class="hidden">
                <img src="carta.jpg" alt="Nossa Foto na Carta" class="foto-da-carta">
                <div id="texto-da-carta" class="carta-texto">
                    <p>Meu amor,</p>
                    <p>Escrevo esta pequena carta para tentar colocar em palavras o que √†s vezes √© dif√≠cil de dizer. Desde que voc√™ entrou na minha vida, tudo ganhou mais cor, mais sentido e mais alegria. Cada dia ao seu lado √© uma nova descoberta e uma confirma√ß√£o de que tenho a pessoa mais incr√≠vel do mundo comigo.</p>
                    <p>Obrigado por tudo. Pelo apoio, pelo carinho e por ser exatamente quem voc√™ √©.</p>
                    <p>Sei que estou errando como namorado, mas quero que saiba que estou sempre aprendendo e tentando ser melhor para voc√™. Voc√™ merece o melhor do mundo, e eu quero ser a pessoa que te faz feliz.</p>
                    <p>Com todo amor, Seu Pedacinho do c√©u.</p>
                </div>
            </div>
        </div>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button><button onclick="proxima()">√öltima P√°gina</button></div>
    </section>

    <section>
        <h1>Feliz Anivers√°rio de Namoro!</h1>
        <div class="coracao-pulsante">‚ù§Ô∏è</div>
        <h2 style="margin-top: 20px;">Obrigado por ser o meu amor.</h2>
        <p style="color: var(--text-muted);">Que venham muitos outros anos ao seu lado. Eu te amo, Prin Prin!</p>
        <div class="botoes-nav"><button onclick="anterior()">Voltar</button></div>
    </section>

</div>

<div id="modal-quiz" class="modal-overlay"><div class="modal-content"><h2 id="modal-texto"></h2><button onclick="fecharModal()">Ok</button></div></div>
<audio id="background-music" loop><source src="musica.mp3" type="audio/mpeg"></audio>

<script>
    const dataCorreta = "2022-06-15T20:30:00"; // Usado para o contador
    let index = 0;
    const secoes = document.querySelectorAll("section");
    const appDiv = document.getElementById("app");
    const backgroundMusic = document.getElementById("background-music");
    const modalQuiz = document.getElementById('modal-quiz');
    const modalTexto = document.getElementById('modal-texto');

    function verificarData() {
      const input = document.getElementById("dataInput").value;
      if (input === "2022-06-15") {
        document.getElementById("login").classList.add("hidden");
        appDiv.classList.remove("hidden");
        mostrarSecao(index);
        atualizarContador();
        setInterval(atualizarContador, 1000);
        backgroundMusic.play().catch(e => console.log("Autoplay bloqueado."));
        if(pages.length > 0) { showPage(0); }
        // --- CHAMADA DAS NOVAS FUN√á√ïES ---
        buscarClima();
        iniciarConstelacao();
      } else {
        alert("Ops! Data incorreta. Tente de novo! üòâ");
      }
    }

    function mostrarSecao(i) { secoes.forEach((sec, idx) => sec.classList.toggle("active", idx === i)); }
    function proxima() { if (index < secoes.length - 1) { index++; mostrarSecao(index); window.scrollTo(0, 0); } }
    function anterior() { if (index > 0) { index--; mostrarSecao(index); window.scrollTo(0, 0); } }

    function atualizarContador() {
      const inicio = new Date(dataCorreta);
      const hoje = new Date();
      const diff = hoje - inicio;
      const anos = Math.floor(diff / (1000 * 60 * 60 * 24 * 365.25));
      const dias = Math.floor((diff % (1000 * 60 * 60 * 24 * 365.25)) / (1000 * 60 * 60 * 24));
      const horas = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutos = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const segundos = Math.floor((diff % (1000 * 60)) / 1000);
      document.getElementById('contador-anos').innerText = anos;
      document.getElementById('contador-dias').innerText = dias;
      document.getElementById('contador-horas').innerText = String(horas).padStart(2, '0');
      document.getElementById('contador-minutos').innerText = String(minutos).padStart(2, '0');
      document.getElementById('contador-segundos').innerText = String(segundos).padStart(2, '0');
    }

    function verificarQuiz(estaCorreto) {
        modalTexto.innerText = estaCorreto ? "Acertou! ‚ù§Ô∏è" : "Quase! Mas o que vale √© a inten√ß√£o üòâ";
        modalQuiz.style.display = 'flex';
    }
    function fecharModal() { modalQuiz.style.display = 'none'; proxima(); }

    function escolherPalavra(palavra, verso) {
        if (verso === 1) {
            document.getElementById('verso1').innerText = palavra;
            document.getElementById('escolha1').classList.add('hidden');
            document.getElementById('verso2').classList.remove('hidden');
            document.getElementById('escolha2').classList.remove('hidden');
        } else if (verso === 2) {
            document.getElementById('verso2-palavra').innerText = palavra;
            document.getElementById('escolha2').classList.add('hidden');
        }
    }

    function resgatarVale(elemento) {
        if (!elemento.classList.contains('resgatado')) {
            elemento.classList.add('resgatado');
        }
    }

    function revelarCarta() {
        const envelope = document.getElementById('foto-carta-capa');
        const conteudo = document.getElementById('conteudo-carta');
        envelope.classList.add('aberta');
        conteudo.classList.remove('hidden');
        setTimeout(() => {
            conteudo.classList.add('revelado');
        }, 100);
        envelope.style.cursor = 'default';
        envelope.onclick = null;
    }

    const pages = document.querySelectorAll('.multi-page-card .page');
    const pageIndicator = document.getElementById('page-indicator');
    let currentPageIndex = 0;

    function showPage(index) {
        if(pages.length === 0) return;
        pages.forEach((page, i) => {
            page.classList.toggle('active-page', i === index);
        });
        currentPageIndex = index;
        if(pageIndicator) {
            pageIndicator.innerText = `${currentPageIndex + 1} / ${pages.length}`;
        }
    }

    function nextPage() {
        if (currentPageIndex < pages.length - 1) {
            showPage(currentPageIndex + 1);
        }
    }

    function previousPage() {
        if (currentPageIndex > 0) {
            // AQUI ESTAVA O ERRO, SOMANDO EM VEZ DE SUBTRAIR. AGORA EST√Å CORRIGIDO.
            showPage(currentPageIndex - 1);
        }
    }

    // --- SCRIPTS DAS NOVAS FUNCIONALIDADES ---

    // 1. HOR√ìSCOPO DO AMOR
    function revelarHoroscopo() {
        document.getElementById('texto-horoscopo').classList.remove('hidden');
        document.getElementById('revelador-horoscopo').classList.add('hidden');
    }

    // C√ìDIGO CORRIGIDO

function gerarReceita() {
    const adjetivo = document.getElementById('input-adjetivo').value || '...';
    const piada = document.getElementById('input-piada').value || '...';
    const lugar = document.getElementById('input-lugar').value || '...';
    const apelido = document.getElementById('input-apelido').value || '...';

    // A linha abaixo foi corrigida para usar ${} corretamente e limpar o HTML
    const resultado = `Nossa receita especial √©: Pegue 2 x√≠caras de <strong>${adjetivo}</strong>, adicione 1 colher de <strong>${piada}</strong>, misture com todo o carinho de <strong>${lugar}</strong> e sirva com uma dose generosa de <strong>${apelido}</strong>. Resultado: Perfei√ß√£o!`;

    const resultadoEl = document.getElementById('resultado-receita');
    resultadoEl.innerHTML = resultado;
    resultadoEl.classList.remove('hidden');
    }

    // 3. SAUDA√á√ÉO COM CLIMA (TOTALMENTE CORRIGIDO)
    async function buscarClima() {
        const saudacaoEl = document.getElementById('saudacao-dinamica');
        const apiKey = "9936b807c9ff2d089fdd04d41603b330";
        const lat = -23.4533; // Latitude de Guarulhos
        const lon = -46.5333; // Longitude de Guarulhos
        const url = `https://api.openweathermap.org/data/2.5/weather?lat=<span class="math-inline">\{lat\}&lon\=</span>{lon}&appid=${apiKey}&units=metric&lang=pt_br`;

        let saudacaoFinal = "";
        const hora = new Date().getHours();

        try {
            const response = await fetch(url);
            if (!response.ok) {
                // Se a API retornar um erro (ex: chave inv√°lida), lan√ßa um erro para o catch.
                throw new Error(`Erro na API: ${response.statusText}`);
            }
            const data = await response.json();
            const temp = Math.round(data.main.temp);
            const desc = data.weather[0].description;

            if (hora >= 5 && hora < 12) {
                saudacaoFinal = `Bom dia MEU AMOR! Que seu dia seja lindo com essa manh√£ de ${desc} e ${temp}¬∞C. E QUE ESSA SURPRESA AQUE√áA SEU CORA√á√ÉO!`;
            } else if (hora >= 12 && hora < 18) {
                saudacaoFinal = `Boa tarde MEU AMOR! Espero que este presente aque√ßa seu cora√ß√£o nesta tarde com ${desc} e ${temp}¬∞C. E QUE ESSA SURPRESA AQUE√áA SEU CORA√á√ÉO!`;
            } else {
                saudacaoFinal = `Boa noite MEU AMOR! Espero que esteja bem nesta noite com ${desc} e ${temp}¬∞C. E QUE ESSA SURPRESA AQUE√áA SEU CORA√á√ÉO!`;
            }
        } catch (error) {
            console.error("N√£o foi poss√≠vel buscar o clima:", error);
            // Mensagem padr√£o caso a API falhe por qualquer motivo.
            if (hora >= 5 && hora < 12) { saudacaoFinal = "Bom dia e bem-vinda!"; }
            else if (hora >= 12 && hora < 18) { saudacaoFinal = "Boa tarde! Espero que goste da surpresa."; }
            else { saudacaoFinal = "Boa noite! Que esta surpresa ilumine sua noite."; }
        }
        saudacaoEl.innerText = saudacaoFinal;
    }

    // 4. CONSTELA√á√ÉO
    function iniciarConstelacao() {
        const canvas = document.getElementById('canvas-constelacao');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const resultadoEl = document.getElementById('constelacao-resultado');

        const estrelas = [{x: 80, y: 100}, {x: 200, y: 50}, {x: 320, y: 150}, {x: 150, y: 300}];
        const raioEstrela = 10;
        let linhas = [];
        let desenhando = false;
        let estrelaInicial = null;
        let conectadas = new Set();
        let completo = false; // Flag para parar de desenhar

        function desenhar() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            linhas.forEach(linha => {
                ctx.beginPath();
                ctx.moveTo(linha.inicio.x, linha.inicio.y);
                ctx.lineTo(linha.fim.x, linha.fim.y);
                ctx.strokeStyle = 'rgba(255, 77, 136, 0.7)';
                ctx.lineWidth = 3;
                ctx.stroke();
            });
            estrelas.forEach((estrela, i) => {
                ctx.beginPath();
                ctx.arc(estrela.x, estrela.y, raioEstrela, 0, Math.PI * 2);
                ctx.fillStyle = conectadas.has(i) ? '#ff4d88' : 'white';
                ctx.fill();
            });
        }

        function getEstrelaNoPonto(x, y) {
            for (let i = 0; i < estrelas.length; i++) {
                const dist = Math.sqrt(Math.pow(estrelas[i].x - x, 2) + Math.pow(estrelas[i].y - y, 2));
                if (dist < raioEstrela) {
                    return i;
                }
            }
            return null;
        }

        function onMouseDown(e) {
            if (completo) return;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            estrelaInicial = getEstrelaNoPonto(x, y);
            if (estrelaInicial !== null) {
                desenhando = true;
            }
        }

        function onMouseUp(e) {
            if (!desenhando || completo) return;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const estrelaFinal = getEstrelaNoPonto(x, y);

            if (estrelaFinal !== null && estrelaInicial !== estrelaFinal) {
                const conexaoId = [estrelaInicial, estrelaFinal].sort().join('-');
                if (!linhas.some(l => l.id === conexaoId)) {
                    linhas.push({ inicio: estrelas[estrelaInicial], fim: estrelas[estrelaFinal], id: conexaoId });
                    conectadas.add(estrelaInicial);
                    conectadas.add(estrelaFinal);
                }
            }
            desenhando = false;
            estrelaInicial = null;
            desenhar();

            if (conectadas.size === estrelas.length) {
                completo = true;
                canvas.style.cursor = 'default';
                setTimeout(() => {
                    resultadoEl.classList.remove('hidden');
                }, 500);
            }
        }

        canvas.addEventListener('mousedown', onMouseDown);
        canvas.addEventListener('mouseup', onMouseUp);

        desenhar();
    }
</script>
</body>
</html>